!function e(t,n,i){function o(r,c){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!c&&s)return s(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){"use strict";var i=e("./routes"),o=e("./components/drum-machine/drumMachineController"),a=e("./components/test/testController"),r=e("./directives/trackDirective"),c=e("./directives/tickSliderDirective"),s=e("./directives/commentDirective");!function(){var e=angular.module("myApp",["ngRoute","ngFileSaver"]);e.config(["$routeProvider",i.initRoutes]),e.controller("drumMachineController",["$scope","$compile","$http","FileSaver","Blob",o.drumMachineController]),e.controller("testController",["$scope",a.testController]),e.directive("tickSlider",c.tickSliderDirective),e.directive("theTrack",["supportedAudioFormats",r.trackDirective]),e.directive("comment",["supportedAudioFormats",s.commentDirective]);var t=new Set;t.add("audio/wav"),t.add("audio/x-wav"),t.add("audio/mp3"),t.add("audio/x-mp3"),t.add("audio/ogg"),t.add("audio/x-ogg"),e.constant("supportedAudioFormats",t)}()},{"./components/drum-machine/drumMachineController":6,"./components/test/testController":7,"./directives/commentDirective":8,"./directives/tickSliderDirective":9,"./directives/trackDirective":10,"./routes":11}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.DrumMachine=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./audio-loader"),c=e("../utils/utils"),s=e("./Track");n.DrumMachine=function(){function e(){i(this,e),this.tag="[DrumMachine.js]",this.numberOfBeats=16;var t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t,this.bpm=120,this.bpmMin=30,this.bpmMax=240,this.tickTime=60/this.bpm/4,this.isPlaying=!1,this.isStopped=!0,this.buffers={},this.tracks={},this.defaultBuffersLoaded=!1,this.defaultTracksLoaded=!1,this._tracksInSolo=new Set,this._tracksInMute=new Set,this.currentTickIndex=0,this.callBacksInLoop=[],this.soundURLs={kick:"app/assets/audio/kick.wav",snare:"app/assets/audio/snare.wav",hat:"app/assets/audio/hat.wav",ride:"app/assets/audio/ride.wav"},(0,c.checkIfiOSdevice)()?this._enableAudioContextForiOS():this.audioContextEnabled=!0}return a(e,[{key:"_enableAudioContextForiOS",value:function(){var e=this;$(document).ready(function(){var t=$("<button/>",{visibility:"hidden"});t.on("touchstart",function(){var t=e.audioContext.createBuffer(1,1,22050),n=e.audioContext.createBufferSource();n.buffer=t,n.start(),e.audioContextEnabled=!0,console.log("AudioContext enabled for iOS")}),t.trigger("touchstart")})}},{key:"_loadDefaultBuffers",value:function(){var e=this,t=this.audioContext,n=this.soundURLs;return new Promise(function(i,o){Promise.all([(0,r.audioLoader)(t,n.kick),(0,r.audioLoader)(t,n.snare),(0,r.audioLoader)(t,n.hat),(0,r.audioLoader)(t,n.ride)]).then(function(t){e.buffers.kick=t[0],e.buffers.snare=t[1],e.buffers.hat=t[2],e.buffers.ride=t[3],e.defaultBuffersLoaded=!0,console.log(e.buffers),e.defaultBuffersLoaded=!0,console.log("Default buffers loaded"),i("Default buffers loaded")},function(e){o(e)})})}},{key:"_initDefaultTracks",value:function(){if(this.defaultBuffersLoaded){this.tracks={};var e=new s.Track(this,"kick",this.buffers.kick);e.setTicksFromArray([0,4,8,12]);var t=new s.Track(this,"snare",this.buffers.snare,1,.1);t.setTicksFromArray([4,12]);var n=new s.Track(this,"hat",this.buffers.hat,.85,-1);n.setTicksFromArray([{active:!0,index:0,volume:.5},{active:!0,index:1,volume:.5},{active:!0,index:2,volume:1.2},{active:!0,index:3,volume:.4},{active:!0,index:4,volume:.9},{active:!0,index:5,volume:.5},{active:!0,index:6,volume:1},{active:!0,index:7,volume:.4},{active:!0,index:8,volume:.9},{active:!0,index:9,volume:.5},{active:!0,index:10,volume:1},{active:!0,index:11,volume:.4},{active:!0,index:12,volume:.9},{active:!0,index:13,volume:.5},{active:!0,index:14,volume:1},{active:!0,index:15,volume:.4}]),this.tracks[e.id]=e,this.tracks[t.id]=t,this.tracks[n.id]=n,this.defaultTracksLoaded=!0,console.log("Default tracks loaded",this.tracks)}}},{key:"_onBpmChanged",value:function(){this.tickTime=60/this.bpm/4}},{key:"_start",value:function(){function e(){if(t.isStopped)return clearTimeout(r),void(t.isPlaying=!1);if(o<=n.currentTime+t.tickTime){t.isPlaying=!0,t.isStopped=!1,$.each(t.tracks,function(e,t){if(!t.mute&&t.buffer){var i=t.ticks[a];if(i.active){var r=n.createBufferSource();r.buffer=t.buffer;var c=n.createGain();r.connect(c),c.gain.value=i.volume,c.connect(t.gainNode),r.start(o)}}}),t.currentTickIndex=a;var i=0===a?t.numberOfBeats-1:a-1,s=0===i?t.numberOfBeats-1:i-1;c&&t.callBacksInLoop.forEach(function(e){e(s,i)}),o+=t.tickTime,a=++a===t.numberOfBeats?0:a}c=!0,r=window.setTimeout(e,0)}if(!this.audioContextEnabled)return void console.log("Cannot play: AudioContext is not enabled.");if(this.isPlaying)return void console.log("Cannot play: it is already playing.");if(!this.defaultTracksLoaded)return void console.log("Cannot play: default tracks not loaded.");this.isStopped=!1;var t=this,n=this.audioContext,i=n.currentTime,o=i+t.tickTime,a=0,r=void 0,c=!1;e()}},{key:"_stop",value:function(){this.isStopped=!0}},{key:"_playSound",value:function(e,t){var n=this.audioContext,i=n.createBufferSource();i.buffer=this.buffers[e],i.connect(n.destination),i.start(t)}},{key:"removeTrack",value:function(e){var t=this.tracks[e];this._tracksInSolo.delete(t),this._tracksInMute.delete(t),delete this.tracks[e]}},{key:"soloTrack",value:function(e){if(this.tracks.hasOwnProperty(e)){var t=this.tracks[e],n=this._tracksInSolo,i=this._tracksInMute;n.has(t)||i.has(t)?n.has(t)?(n.delete(t),t.solo=!1,n.size>0?(i.add(t),t.mute=!0):(i.clear(),n.clear(),$.each(this.tracks,function(e,t){t.mute=!1,t.solo=!1}))):(n.add(t),t.solo=!0,t.mute=!1,1===n.size&&$.each(this.tracks,function(t,n){t!==e&&(i.add(n),n.mute=!0)})):(n.add(t),t.solo=!0,t.mute=!1,$.each(this.tracks,function(t,o){t!==e&&(n.has(o)||(i.add(o),o.mute=!0,o.solo=!1))}))}}},{key:"muteTrack",value:function(e){if(this.tracks.hasOwnProperty(e)){var t=this.tracks[e],n=this._tracksInSolo,i=this._tracksInMute;n.has(t)||i.has(t)?n.has(t)?(n.delete(t),i.add(t),t.solo=!1,t.mute=!0,0===n.size&&$.each(this.tracks,function(t,n){t!==e&&(i.delete(n),n.mute=!1)})):i.has(t)&&(n.size>0?(i.delete(t),n.add(t),t.mute=!1,t.solo=!0):(i.delete(t),t.mute=!1)):(i.add(t),t.mute=!0,t.solo=!1)}}},{key:"addCallBackInLoop",value:function(e){"function"!==!(void 0===e?"undefined":o(e))&&this.callBacksInLoop.push(e)}},{key:"isInRangeBPM",value:function(e){return e>=this.bpmMin&&e<=this.bpmMax}},{key:"_createEmptyTicksArray",value:function(){for(var e=[],t=0;t<this.numberOfBeats;t++)e.push({index:t,volume:0,active:!1});return e}},{key:"_clearTracks",value:function(){this._tracksInSolo.clear(),this._tracksInMute.clear();for(var e in this.tracks)this.tracks.hasOwnProperty(e)&&delete this.tracks[e]}},{key:"addEmptyTrack",value:function(){var e="track_"+(Object.keys(this.tracks).length+1),t=new s.Track(this,e);t.setTicksFromArray(this._createEmptyTicksArray()),this.tracks[t.id]=t}},{key:"createTrack",value:function(e,t,n,i,o){var a=this;return new Promise(function(c,u){(0,r.audioLoader)(a.audioContext,t).then(function(t){var r=new s.Track(a,e,t);o?r.setTicksFromArray(o):r.setTicksFromArray(a._createEmptyTicksArray()),n&&(r.gainNode.gain.value=n),i&&r.pannerNode&&(r.pannerNode.pan.value=i),console.log("CREATE",r),c(r)},function(e){console.log(e),u(e)})})}},{key:"loadPreset",value:function(e){var t=this;try{this.bpm=e.bpm,this._clearTracks();var n=[];return e.tracks.forEach(function(e){n.push(t.createTrack(e.name,e.soundPath,e.volume,e.pan,e.ticks))}),Promise.all(n)}catch(e){return new Promise(function(t,n){n(e)})}}},{key:"bpm",get:function(){return this._bpm},set:function(e){e!==this._bpm&&(this._bpm=e,this._onBpmChanged())}}]),e}()},{"../utils/utils":12,"./Track":4,"./audio-loader":5}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.Tick=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(this,e),this.index=t,this.active=n,this.volume=o}},{}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Track=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./Tick"),c=e("../utils/utils");n.Track=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"track_default",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];i(this,e),this.id=(0,c.guid)(),this.drumMachine=t,this.audioContext=t.audioContext,this.name=n,this.buffer=o,this.solo=!1,this.mute=s,this.ticks=[],this.pannerNodeSupported=!1,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=a,"function"==typeof this.audioContext.createStereoPanner?(this.pannerNode=this.audioContext.createStereoPanner(),this.pannerNode.pan.value=r,this.gainNode.connect(this.pannerNode),this.pannerNode.connect(this.audioContext.destination),this.pannerNodeSupported=!0,console.log("Stereo panner supported")):(this.gainNode.connect(this.audioContext.destination),console.log("Stereo panner not supported")),this._initTicks()}return a(e,[{key:"_initTicks",value:function(){this.ticks=[];for(var e=0;e<this.drumMachine.numberOfBeats;++e)this.ticks.push(new r.Tick(e))}},{key:"setTick",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e<0||e>this.drumMachine.numberOfBeats-1||(this.ticks[e].volume=n,this.ticks[e].active=t)}},{key:"setTicksFromArray",value:function(e){var t=this;e.forEach(function(e){if("object"===(void 0===e?"undefined":o(e))){if("undefined"===e.index||e.index<0||e.index>t.drumMachine.numberOfBeats-1)return;t.ticks[e.index].volume="undefined"!==e.volume?e.volume:0,t.ticks[e.index].active="undefined"!==e.active&&e.active}else t.ticks[e].active=!0})}},{key:"setBuffer",value:function(e,t){this.buffer=e,console.log("Track "+this.name+": audio buffer changed ( "+t+" )")}},{key:"playSound",value:function(){if(this.audioContext&&this.buffer){var e=this.audioContext.createBufferSource();e.buffer=this.buffer,e.connect(this.audioContext.destination),e.start()}}}]),e}()},{"../utils/utils":12,"./Tick":3}],5:[function(e,t,n){"use strict";function i(e,t){return new Promise(function(n,i){if(!e)return void i("Missing audio context parameter.");if(!t)return void i("Missing url parameter");var o=new XMLHttpRequest;o.open("GET",t),o.responseType="arraybuffer",o.onload=function(){try{e.decodeAudioData(o.response,function(e){n(e)})}catch(e){i(e)}},o.send()})}Object.defineProperty(n,"__esModule",{value:!0}),n.audioLoader=i},{}],6:[function(e,t,n){"use strict";function i(e,t,n,i,a){function r(e){p.removeTrack(e.id)}function c(t){t.preventDefault(),t.stopPropagation(),m.css({backgroundColor:"transparent",backgroundImage:"url(./app/assets/icons/Play-50-green.png)"}),v.css({backgroundColor:"transparent",backgroundImage:"url(./app/assets/icons/Stop-50-white.png)"}),e.startSequencer()}function s(t){t.preventDefault(),t.stopPropagation(),v.css({backgroundColor:"transparent",backgroundImage:"url(./app/assets/icons/Stop-50-red.png)"}),m.css({backgroundColor:"transparent",backgroundImage:"url(./app/assets/icons/Play-50-white.png)"}),e.stopSequencer()}function u(t){p.loadPreset(t).then(function(t){t.forEach(function(e){p.tracks[e.id]=e}),e.bpm=p.bpm,h.slider("value",e.bpm),e.$apply()},function(e){console.log(e)})}function l(){var t=$("nav#menu").data("mmenu"),n=$('<li><a href="#exportMidi" >Export midi</a></li>');n.click(e.exportMidi),$("#menu-list").find(".mm-listview").append(n),t.initPanels($("#menu-list"))}function d(){n({url:"http://192.168.1.75:4500/api/presets",method:"GET",headers:{Accept:"application/json"}}).then(function(e){var t=e.data;if(0!==t.length){var n=$('<li><a href="#">Presets</a></li>'),i=$("<ul></ul>");n.append(i),t.forEach(function(e){var t=$('<li><a href="#">'+e.name+"</a></li>");t.click(function(){u(e)}),i.append(t)});var o=$("nav#menu").data("mmenu");$("#menu-list").find(".mm-listview").append(n),o.initPanels($("#menu-list")),l()}},function(e){console.log(e),l()})}function f(){n({url:"http://192.168.1.75:4500/api/comments",method:"GET",headers:{Accept:"application/json"}}).then(function(t){console.log(t),e.comments=t.data,e.safeApply()},function(e){console.log(e)})}e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)};var p=new o.DrumMachine,m=$("#sequencerPlayButton"),v=$("#sequencerStopButton"),h=$("#sequencerBPMslider");e.title="Main Controller",e.tracks=[],e.ticksElements=[],e.bpm=p.bpm,e.isPlaying=p.isPlaying,e.isStopped=p.isStopped,e.removeTrack=r,e.integerval=/^\d*$/,e.beats=new Array(p.numberOfBeats).fill(!1),e.username="",e.commentToPost="",e.comments=[],e.invalidUsernameMessage="Give ya a name! (3-32 characters)",e.invalidCommentMessage="Write something cool! (3-1000 characters)",$("#accordion").accordion({animate:200,collapsible:!0,heightStyle:"content"}),$("#postCommentBtn").button({icon:"ui-icon-pencil"}),$(window).ready(function(){function e(e,t){$(n[e]).removeClass("beat-indicator-active"),$(n[t]).addClass("beat-indicator-active")}var t=document.getElementById("beatIndicators"),n=t.getElementsByClassName("beat-indicator");p.addCallBackInLoop(e)}),window.addEventListener("keyup",function(t){switch(t.keyCode){case 32:$("textarea#commentArea, input#usernameInput").is(":focus")?(t.preventDefault(),t.stopPropagation()):e.isStopped?c(t):s(t)}}),e.startSequencer=function(){p._start(),e.isPlaying=!0,e.isStopped=!1},e.stopSequencer=function(){p._stop(),e.isPlaying=!1,e.isStopped=!0;var t=document.getElementById("beatIndicators").getElementsByClassName("beat-indicator");$(t).removeClass("beat-indicator-active")},e.addTrack=function(){p.addEmptyTrack()},e.exportMidi=function(){var e=[];for(var t in p.tracks)p.tracks.hasOwnProperty(t)&&function(){var n=p.tracks[t],i={name:n.name,notes:[]},o=0;n.ticks.forEach(function(e){if(e.active){var t={pitch:["C4"],velocity:e.volume,duration:"16"};if(o>0){var n="T"+32*o;t.wait=n}i.notes.push(t),o=0}else o+=1}),e.push(i)}();var o={bpm:p.bpm,timeSignature:{num:4,den:4},tracks:e};n({url:"http://localhost:4500/api/midi",method:"POST",responseType:"arraybuffer",headers:{"Content-Type":"application/json"},data:JSON.stringify(o)}).then(function(e){console.log(e);var t=new a([e.data],{type:"audio/midi"});i.saveAs(t,"loop.mid")},function(e){console.log(e)})},e.loadPreset=function(){n({url:"http://localhost:4500/api/presets",method:"GET",headers:{Accept:"application/json"}}).then(function(t){var n=t.data;0!==n.length&&p.loadPreset(n[0]).then(function(t){t.forEach(function(e){p.tracks[e.id]=e}),e.bpm=p.bpm,h.slider("value",e.bpm),e.$apply()},function(e){console.log(e)})},function(e){console.log(e)})},e.savePreset=function(){var e={name:"psy-trance",bpm:145,timeSignature:{num:4,den:4},tracks:[{name:"kick",soundPath:"app/assets/audio/trance/trance-kick.wav",volume:1,pan:0,ticks:[{active:!0,index:0,volume:1},{active:!0,index:4,volume:1},{active:!0,index:8,volume:1},{active:!0,index:12,volume:1}]},{name:"clap",soundPath:"app/assets/audio/trance/trance-clap.wav",volume:1,pan:0,ticks:[{active:!0,index:4,volume:1},{active:!0,index:12,volume:1}]},{name:"hh open",soundPath:"app/assets/audio/trance/trance-hh-open.wav",volume:.8,pan:.2,ticks:[{active:!0,index:2,volume:.8},{active:!0,index:6,volume:.8},{active:!0,index:10,volume:.8},{active:!0,index:14,volume:.8}]},{name:"bass",soundPath:"app/assets/audio/trance/trance-bass-A1.wav",volume:.8,pan:0,ticks:[{active:!0,index:1,volume:.8},{active:!0,index:2,volume:.8},{active:!0,index:3,volume:.8},{active:!0,index:5,volume:.8},{active:!0,index:6,volume:.8},{active:!0,index:7,volume:.8},{active:!0,index:9,volume:.8},{active:!0,index:10,volume:.8},{active:!0,index:11,volume:.8},{active:!0,index:13,volume:.8},{active:!0,index:14,volume:.8},{active:!0,index:15,volume:.8}]}]};n({url:"http://localhost:4500/api/presets",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)}).then(function(e){console.log(e)},function(e){console.log(e)})},e.postComment=function(){var t={username:e.username,message:e.commentToPost};n({url:"http://192.168.1.75:4500/api/comments",method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},data:JSON.stringify(t)}).then(function(t){console.log(t),e.comments.splice(0,0,t.data),e.commentToPost="",e.safeApply()},function(e){console.log(e)})},function(e,t){t._loadDefaultBuffers().then(function(){t._initDefaultTracks(),e.tracks=t.tracks,e.$apply()},function(e){console.log(e)})}(e,p),function(e,t){m.on("mousedown touchstart",function(e){e.preventDefault(),e.stopPropagation(),m.css({backgroundColor:"#444"})}),m.on("mouseup touchend",function(e){c(e)}),v.on("mousedown touchstart",function(e){e.preventDefault(),e.stopPropagation(),v.css({backgroundColor:"#444"})}),v.on("mouseup touchend",function(e){s(e)}),h.slider({min:t.bpmMin,max:t.bpmMax,orientation:"horizontal",value:e.bpm,slide:function(n,i){t.bpm=i.value,e.bpm=i.value,e.$apply()}}).draggable(),e.updateSlider=function(){t.isInRangeBPM(e.bpm)&&(h.slider("value",e.bpm),t.bpm=e.bpm)}}(e,p),$(window).ready(function(){d(),f()})}Object.defineProperty(n,"__esModule",{value:!0}),n.drumMachineController=i;var o=e("../../audio/DrumMachine")},{"../../audio/DrumMachine":2}],7:[function(e,t,n){"use strict";function i(e){e.title="Test Controller",console.log("Test Controller")}Object.defineProperty(n,"__esModule",{value:!0}),n.testController=i},{}],8:[function(e,t,n){"use strict";function i(){return{restrict:"AE",replace:"false",templateUrl:"app/directives/templates/commentDirective.html",link:function(e,t,n){}}}Object.defineProperty(n,"__esModule",{value:!0}),n.commentDirective=i},{}],9:[function(e,t,n){"use strict";function i(){return{restrict:"AE",replace:"false",scope:{tick:"=",ticksElements:"=",resizeTick:"="},link:function(e,t,n){e.ticksElements.push(t),t.slider({min:0,max:100,orientation:"vertical",value:e.tick.active?100*e.tick.volume:0,slide:function(t,n){0===n.value?e.tick.active=!1:e.tick.active=!0,e.tick.volume=.01*n.value}}).draggable()}}}Object.defineProperty(n,"__esModule",{value:!0}),n.tickSliderDirective=i},{}],10:[function(e,t,n){"use strict";function i(e){return{restrict:"AE",replace:"false",scope:{track:"=",ticksElements:"=",removeTrack:"="},templateUrl:"app/directives/templates/trackDirective.html",link:function(t,n,i){function o(e){var t=n.find(".ticks-container").width();console.log(t);Math.floor((t-120)/16)}function a(n){if(n&&!(n.length<1)){var i=n[0];if(!e.has(i.type))return void console.log("File format not supported by Web Audio API");var o=new FileReader;o.onload=function(e){t.track.audioContext.decodeAudioData(e.target.result,function(e){t.track.setBuffer(e,i.name)})},o.readAsArrayBuffer(i)}}function r(e){n.hasClass("track-dragfile")||n.addClass("track-dragfile"),e.stopPropagation(),e.preventDefault()}function c(e){e.stopPropagation(),e.preventDefault(),a(e.originalEvent.dataTransfer.files),s()}function s(e){n.hasClass("track-dragfile")&&n.removeClass("track-dragfile"),e&&(e.stopPropagation(),e.preventDefault())}function u(){t.track.playSound()}function l(){t.track.drumMachine.soloTrack(t.track.id)}function d(){t.track.drumMachine.muteTrack(t.track.id)}t.resizeTick=o,t.handleFiles=a,t.playSound=u,t.onSoloTrack=l,t.onMuteTrack=d,n.find('button[name="removeTrackButton"]').button({icon:"ui-icon-close",showLabel:!1}),n.find('button[name="playSoundButton"]').button({icon:"ui-icon-circle-triangle-e",showLabel:!1}),n.find('div[id="trackVolumeSlider"]').slider({min:0,max:100,orientation:"horizontal",value:100*t.track.gainNode.gain.value,slide:function(e,n){t.track.gainNode.gain.value=.01*n.value}}).draggable(),t.track.pannerNodeSupported?n.find('div[id="trackPanSlider"]').slider({min:-100,max:100,orientation:"horizontal",value:100*t.track.pannerNode.pan.value,slide:function(e,n){t.track.pannerNode.pan.value=.01*n.value}}).draggable():(n.find('div[id="trackPanSlider"]').remove(),n.find(".pan-label").remove(),n.find('div[id="trackVolumeSlider"]').css({})),n.find("button[name=soloTrackButton]").button({}),n.find("button[name=muteTrackButton]").button({}),n.on("dragover",r),n.on("drop",c),n.on("dragleave",s)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.trackDirective=i},{}],11:[function(e,t,n){"use strict";function i(e){e.when("/",{controller:"drumMachineController",templateUrl:"app/components/drum-machine/drumMachineView.html"}),e.when("/test",{controller:"testController",templateUrl:"app/components/test/testView.html"}),e.otherwise({redirectTo:"/"})}Object.defineProperty(n,"__esModule",{value:!0}),n.initRoutes=i},{}],12:[function(e,t,n){"use strict";function i(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}Object.defineProperty(n,"__esModule",{value:!0}),n.checkIfiOSdevice=i,n.guid=o},{}]},{},[1]);
//# sourceMappingURL=app.bundle.min.js.map
